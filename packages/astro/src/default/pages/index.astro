---
import { getTutorial } from '../utils/content';
import { joinPaths } from '../utils/url';

const tutorial = await getTutorial();

const part = tutorial.parts[tutorial.firstPartId!];
const chapter = part.chapters[part.firstChapterId!];
const lesson = tutorial.lessons.find((l) => l.id === chapter.firstLessonId)!;

if (!lesson) {
  throw new Error(
    `Unable to find lesson for ${JSON.stringify(
      {
        partId: tutorial.firstPartId || null,
        chapterId: part.firstChapterId || null,
        lessonId: chapter.firstLessonId || null,
      },
      null,
      2,
    )}`,
  );
}

const redirect = joinPaths(import.meta.env.BASE_URL, `/${part.slug}/${chapter.slug}/${lesson.slug}`);
---

<!doctype html>
<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
<title>Redirecting to {redirect}</title>
<meta http-equiv="refresh" content=`0;url=${redirect}` />
